<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <script src='startMove.js'></script>
  <title>Document</title>
  <style>
  * {
    margin: 0;padding: 0;
  }

  #ul1 {
    width:400px;
    height:400px;
    border:1px solid red;
    margin:10px auto;
    overflow: hidden;
  }
  #ul1 li {
    border-bottom: 1px #999 dashed;
    padding: 4px;
    list-style: none;
    overflow: hidden;
    opacity: 0;
    filter: alpha(opacity:0);
  }
  </style>
</head>
<body>
  <textarea id='txt1' rows="4" cols="40"></textarea>
  <input id='btn1' type="button" value='发布'/>
  <ul id='ul1'>
  </ul>
</body>
<script>
  window.onload = function(){
    let oBtn1 = document.getElementById('btn1');
    let oUl1 = document.getElementById('ul1');
    let oTxt = document.getElementById('txt1');

    oBtn1.onclick = function(){
      let newLi = document.createElement('li');

      newLi.innerHTML = oTxt.value;
      oTxt.value = '';
      if(oUl1.children.length > 0){
          oUl1.insertBefore(newLi,oUl1.children[0]);
      }else{
          oUl1.appendChild(newLi);
      }
      let newLiHeight = newLi.offsetHeight;

      startMove(newLi,{height:newLiHeight},function(){
        startMove(newLi,{opacity:100});
      })

    }
   }
</script>
</html>
